<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>KPolice | Dashboard</title>
        <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
        <!-- bootstrap 3.0.2 -->
        <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css" />
        <!-- font Awesome -->
        <link href="css/font-awesome.min.css" rel="stylesheet" type="text/css" />
        <!-- Ionicons -->
        <link href="css/ionicons.min.css" rel="stylesheet" type="text/css" />
        <!-- Theme style -->
        <link href="css/AdminLTE.css" rel="stylesheet" type="text/css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        
        
        
        <!-- -assssss -->
        <script>
 $(window).load(function() {
        // Animate loader off screen
        $(".se-pre-con").fadeOut("slow");;
    });
 
   

 </script>
        <!-- asssssss -->
         <script type="text/javascript">
         
         var now_case;
         function magic(opt)
         {
         	now_case=opt;
         	alert(opt);
         	
         }
         function validateForm() {
    var x = document.forms["myForm"]["InputName"].value;
    if (x == null || x == "") {
        
        return false;
    }
    var y=document.forms["myForm"]["CaseDetail"].value;
     if (y == null || y == "") {
        
        return false;
    }
    var z=document.forms["myForm"]["OfficerName"].value;
     if (z == null || z == "") {
       
        return false;
    }
    var u=document.forms["myForm"]["PoliceStation"].value;
     if (u == null || u == "") {
        
        return false;
    }
    return true;
}
         
         function update(val,val1,val2,val3)
         {
 	$('#erro').css("display","none");
       	if(validateForm()){
       	$('#update').css("display","block");
      
         $.ajax( { url: 'https://api.mongolab.com/api/1/databases/accident_info/collections/case_info?apiKey=fbLkdET5dnRx-7ZZzlcHkvAOnWFeXTuD&q={"case_data.id":"'+now_case+'"}&u=true',
		  data: JSON.stringify( { "$set" : {"case_data.$.case_id":val,"case_data.$.case_details":val1,"case_data.$.Investigator":val2,"case_data.$.police_station":val3,"case_data.$.progress_scale":"2","case_data.$.case_verified":"1"}} ),
		  type: "PUT",
		  contentType: "application/json" } ).done(function (msg){
			alert("dasf");
			$(".close").click();
			location.reload();
		  });
	 }
	 else
	 	$('#erro').css("display","block");

         }	
         
         
         function load (argument) {

    $.ajax({url: "https://api.mongolab.com/api/1/databases/accident_info/collections/case_info?f={%22_id%22:0,%22case_data%22:1,%22case_data.id%22:1,%22case_data.case_date%22:1,%22case_data.title%22:1,%22case_data.Reported_Person_Id%22:1,%22case_data.case_location%22:1}&q={%22case_data.progress_scale%22:%221%22}&apiKey=fbLkdET5dnRx-7ZZzlcHkvAOnWFeXTuD", success: function(result){
      console.log(result);
        drawTable(result);
        
        
    }});
    // body...



function drawTable(data) {
    var j=0;
    for (var i = 0; i < data.length; i++) {
        drawRow(data[i]);
     

    }

}




function drawRow(rowData) {
    var row = $("<tr />")
    $("#personDataTable").append(row); //this will append tr element to table... keep its reference for a while since we will add cels into it
    row.append($("<td>" + rowData.case_data[0].Reported_Person_Id + "</td>"));
    row.append($("<td>" + rowData.case_data[0].case_location + "</td>"));
    row.append($("<td>" + rowData.case_data[0].case_date + "</td>"));
    row.append($("<td>" + rowData.case_data[0].title + "</td>"));
    row.append( $("<td>" +'<button type="button" class="btn btn-success " onclick=calling("'+rowData.case_data[0].Reported_Person_Id+'") data-toggle="modal" data-target="#">Sender Details</button>'+ "</td>"));
       row.append( $("<td>" +'<button type="button" id="model" onclick=magic("'+rowData.case_data[0].id+'") class="btn btn-info " data-toggle="modal" data-target="#myModal">Undertaking</button>'+ "</td>"));
        row.append( $("<td>" +'<button type="button" class="btn btn-default " onclick=calling2("'+rowData.case_data[0].Reported_Person_Id+'") data-toggle="modal" data-target="#">Dive In</button>'+ "</td>"));

}


}
function calling(id)
{

window.open("http://code.theonecoders.in/profile.html?userID="+id,'_blank');
}
function calling2(id)
{
alert(id);

}
</script>

    </head>
    <body class="skin-blue" onload="load()">

<div class="se-pre-con"></div>
        <!-- header logo: style can be found in header.less -->
        <header class="header">
            <a href="dash.php" class="logo">
                <img src="img/logo1.jpg" class="img-circle" alt="User Image" width="35" height="35"/>
                Karnataka Police
            </a>
            <!-- Header Navbar: style can be found in header.less -->
            <nav class="navbar navbar-static-top" role="navigation">
                <!-- Sidebar toggle button-->
                <a href="#" class="navbar-btn sidebar-toggle" data-toggle="offcanvas" role="button">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>
                <div class="navbar-right">
                    <ul class="nav navbar-nav">
                       
                        <li class="dropdown user user-menu">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                <i class="glyphicon glyphicon-user"></i>
                                <span>Manish Gautam <i class="caret"></i></span>
                            </a>
                            <ul class="dropdown-menu">
                                <!-- User image -->
                                <li class="user-header bg-light-blue">
                                    <img src="img/mani.png" class="img-circle" alt="User Image" />
                                    <p>
                                        Manish Gautam
                                        <small>Member since Nov. 2015</small>
                                    </p>
                                </li>
                                <!-- Menu Body -->
                               
                                <!-- Menu Footer-->
                              
                            </ul>
                        </li>
                    </ul>
                </div>
            </nav>
        </header>
        <div class="wrapper row-offcanvas row-offcanvas-left">
            <!-- Left side column. contains the logo and sidebar -->
            <aside class="left-side sidebar-offcanvas">
                <!-- sidebar: style can be found in sidebar.less -->
                <section class="sidebar">
                    <!-- Sidebar user panel -->
                    <div class="user-panel">
                        <div class="pull-left image">
                            <img src="img/mani.png" class="img-circle" alt="User Image" />
                        </div>
                        <div class="pull-left info">
                            <p>Manish</p>

                            <a href="#"><i class="fa fa-circle text-success"></i> Online</a>
                        </div>
                    </div>
                   
                    <!-- sidebar menu: : style can be found in sidebar.less -->
                    <ul class="sidebar-menu">
                     <li >
                            <a href="dash.php">
                                <i class="fa fa-home"></i> <span>Home</span>
                            </a>
                        </li>
                        <li>
                            <a href="solve.html">
                                <i class="fa fa-check-square-o"></i> <span>Solved Case</span> 
                            </a>
                        </li>
                        <li>
                            <a href="request.html">
                                <i class="fa fa-plus-square-o"></i> <span>New Request</span>
                            </a>
                        </li>
                       <li>
                            <a href="on.html">
                                <i class="fa fa-exchange"></i> <span>Ongoing Case/Request</span>
                            </a>
                        </li>
                        <li>
                            <a href="anl.html">
                                <i class="fa fa-qrcode fa-lg"></i> <span>Analysis</span>
                            </a>
                        </li>
                         <li>
                            <a href="social.html">
                                <i class="fa fa-envelope "></i> <span>Social</span>
                            </a>
                        </li>
                         <li>
                            <a href="station.html">
                                <i class="fa fa-building-o"></i> <span>Police Station</span>
                            </a>
                        </li>
                        <li>
                            <a href="user.php">
                                <i class="fa fa-user"></i> <span>Registered User</span>
                            </a>
                        </li>
                        
                      
                    </ul>
                </section>
                <!-- /.sidebar -->
            </aside>

            <!-- Right side column. Contains the navbar and content of the page -->
            <aside class="right-side">
                <!-- Content Header (Page header) -->
                <section class="content-header">
                    <h1>
                        New Request
                        
                    </h1>
                    <ol class="breadcrumb">
                        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
                        <li class="active">New Request</li>

                    </ol>
                </section>

                <section class="content">
                     <div class="row">
                        <div class="col-xs-12">
                            <div class="box">
                                <div class="box-header">
                                    <h3 class="box-title">Request List</h3>
                                   
                                </div><!-- /.box-header -->
                                <div class="box-body table-responsive no-padding">
                                    <table class="table table-hover" id="personDataTable">
                                        <tr>
                                            <th>User Id</th>
                                            <th>Location</th>
                                            <th>Date</th>
                                            <th>Title</th>
                                            <th>Sender Info.</th>
                                            <th id="2">Undertaking</th>
                                            <th id="2">Analysis</th>
                                        </tr>
                                       
                                    </table>
                                </div><!-- /.box-body -->
                            </div><!-- /.box -->
                        </div>
                    </div>
                   
                      

                </section>
            </aside><!-- /.right-side -->

 <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Undertaking</h4>
        </div>
        <div class="modal-body">
          <!-- Registration form - START -->
<div class="container">
    <div class="row">
        <form role="form" method="post" name="myForm">
            <div class="col-lg-6">
                <div class="well well-sm" id="erro" style="display:none"><span id="mess-error"><strong>All Field Required</strong></span> </div>
                <div class="well well-sm" id="update" style="display:none"><span id="mess-error"><strong>Pls wait...updating</strong></span> </div>
                <div class="form-group">
                    <label for="InputName">Case Id</label>
                    <div class="input-group">
                        <input type="text" class="form-control" name="InputName" id="InputName" placeholder="Enter Case Id" required>
                        <span class="input-group-addon"><span class="glyphicon glyphicon-bookmark"></span></span>
                    </div>
                </div>
                
               
             
               
            
               
             <div class="form-group">
                    <label for="InputName">Case Details</label>
                    <div class="input-group">
                        <input type="text" class="form-control" name="CaseDetail" id="CaseDetail" placeholder="Descriptive Case Details" required>
                        <span class="input-group-addon"><span class="glyphicon glyphicon-map-marker"></span></span>
                    </div>
                </div>
               
                               
                <div class="form-group">
                    <label for="InputName">Investigating Officer</label>
                    <div class="input-group">
                        <input type="text" class="form-control" name="OfficerName" id="OfficerName" placeholder="Enter Case Id" required>
                        <span class="input-group-addon"><span class="glyphicon glyphicon-user"></span></span>
                    </div>
                </div>
               
                   
             <div class="form-group">
                    <label for="InputName">Police Station</label>
                    <div class="input-group">
                        <input type="text" class="form-control" name="PoliceStation" id="PoliceStation" placeholder="Assign to Police Station Name " required>
                        <span class="input-group-addon"><span class="glyphicon glyphicon-map-marker"></span></span>
                    </div>
                </div>
               
               
                
               
                <input type="button" name="submit" id="submit" value="Submit" onclick="update(this.form.InputName.value,this.form.CaseDetail.value,this.form.OfficerName.value,this.form.PoliceStation.value)" class="btn btn-info pull-right">
            </div>
        </form>
        
    </div>
</div>
<!-- Registration form - END -->
                

           
        </div>
        
      </div>
    </div>
  </div>
            
        </div><!-- ./wrapper -->
         
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js"></script>
        <script src="js/jquery-ui-1.10.3.min.js" type="text/javascript"></script>
        <!-- Bootstrap -->
        <script src="js/bootstrap.min.js" type="text/javascript"></script>
        <!-- Morris.js charts -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
        <script src="js/plugins/morris/morris.min.js" type="text/javascript"></script>
        <!-- Sparkline -->
        <script src="js/plugins/sparkline/jquery.sparkline.min.js" type="text/javascript"></script>
        <!-- jvectormap -->
        <script src="js/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js" type="text/javascript"></script>
        <script src="js/plugins/jvectormap/jquery-jvectormap-world-mill-en.js" type="text/javascript"></script>
        <!-- fullCalendar -->
        <script src="js/plugins/fullcalendar/fullcalendar.min.js" type="text/javascript"></script>
        <!-- jQuery Knob Chart -->
        <script src="js/plugins/jqueryKnob/jquery.knob.js" type="text/javascript"></script>
        <!-- daterangepicker -->
        <script src="js/plugins/daterangepicker/daterangepicker.js" type="text/javascript"></script>
        <!-- Bootstrap WYSIHTML5 -->
        <script src="js/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js" type="text/javascript"></script>
        <!-- iCheck -->
        <script src="js/plugins/iCheck/icheck.min.js" type="text/javascript"></script>

        <!-- AdminLTE App -->
        <script src="js/AdminLTE/app.js" type="text/javascript"></script>
        
        <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
        <script src="js/AdminLTE/dashboard.js" type="text/javascript"></script>   
          <script src="js/modernizr.js" type="text/javascript"></script>
            <script src="js/jq.js" type="text/javascript"></script>     

    </body>
</html>